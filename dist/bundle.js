(()=>{"use strict";const e={regularText:"#0B5465",highlightedText:"#027998",bulletPointAndText:"#B30109",mixedStylesText:"#CE5057",backgroundAndNumber:"#FFFBEF"},t={roxboroughBold:{family:"Roxborough CF",style:"Bold"},dmSansBold:{family:"DM Sans",style:"Bold"},dmSansRegular:{family:"DM Sans",style:"Regular"}};function a(e){return{r:parseInt(e.slice(1,3),16)/255,g:parseInt(e.slice(3,5),16)/255,b:parseInt(e.slice(5,7),16)/255}}async function l(l,o,n,i=!1){let s=55,r=10,c=o,d=39;const g=l.match(/^(\d+)\.\s*(.*)/);if(g){const t=g[1],l=(g[2],figma.createRectangle());l.resize(39,d),l.cornerRadius=10,l.x=s,l.y=o,l.fills=[{type:"SOLID",color:a(e.bulletPointAndText)}],n.appendChild(l);const r=figma.createText();await figma.loadFontAsync({family:"Roxborough CF",style:"Bold"}),r.fontName={family:"Roxborough CF",style:"Bold"},r.fontSize=32,r.characters=t,r.x=l.x+l.width/2-r.width/2,r.y=l.y+l.height/2-r.height/2,r.fills=[{type:"SOLID",color:a(e.backgroundAndNumber)}],n.appendChild(r),c=l.y,d=l.height,s+=l.width+15,i=!0}const f=figma.createText();if(f.x=s,f.y=o,l.startsWith("**"))await figma.loadFontAsync(t.roxboroughBold),f.fontName=t.roxboroughBold,f.fontSize=32,l=l.replace(/\*\*/g,""),f.fills=[{type:"SOLID",color:a(e.highlightedText)}],r=20;else if(g){await figma.loadFontAsync(t.roxboroughBold),f.fontName=t.roxboroughBold,f.fontSize=16,f.fills=[{type:"SOLID",color:a(e.bulletPointAndText)}],l=l.replace(/^\d+\.\s+/,"").replace(/\*\*(.*?)\*\*/g,"$1"),await figma.loadFontAsync(f.fontName);const o=16;f.y=c+d/2-o/2,r=10}else{if(l.includes("*"))return await async function(l,o){await figma.loadFontAsync(t.dmSansRegular),l.fontName=t.dmSansRegular,l.fontSize=14,l.fills=[{type:"SOLID",color:a(e.mixedStylesText)}];const n=o.match(/^\s*[-]\s?/),i=n?n[0].length:0;let s,r=o.replace(/^\s*[-]\s?|\*/g,"");l.characters=r;const c=/\*([^\*]+)\*/g;let d=0;for(;null!==(s=c.exec(o));){let o=s.index-d-i,n=o+s[1].length;await figma.loadFontAsync(t.dmSansBold),l.setRangeFontName(o,n,t.dmSansBold),l.setRangeFontSize(o,n,14),l.setRangeFills(o,n,[{type:"SOLID",color:a(e.mixedStylesText)}]),d+=s[0].length-s[1].length}}(f,l),f.resize(486,f.height),i?(r=5,f.y=c+20,i=!1,n.appendChild(f),o=f.y+f.height+r):(n.appendChild(f),o=f.y+f.height+r);await figma.loadFontAsync(t.dmSansRegular),f.fontName=t.dmSansRegular,f.fontSize=14,f.fills=[{type:"SOLID",color:a(e.regularText)}]}return f.characters=l,f.resize(486-(s-55),f.height),n.appendChild(f),o+f.height+r}function o(e,t,l,o){const n=figma.createRectangle();n.resize(l,o),n.y=t,n.x=55,n.fills=[{type:"SOLID",color:a("#CCCCCC")}],n.cornerRadius=25,e.appendChild(n)}figma.showUI(__html__,{width:400,height:300}),figma.ui.onmessage=async n=>{if("create-text-layers"===n.type){const i=n.text.split("\n").filter((e=>""!==e.trim()));await async function(n){await async function(){await Promise.all([figma.loadFontAsync(t.roxboroughBold),figma.loadFontAsync(t.dmSansBold),figma.loadFontAsync(t.dmSansRegular)])}();let i=0;const s=[n.slice(0,2),n.slice(2,13),n.slice(13,24),n.slice(24)];for(let t=0;t<s.length;t++){const n=s[t],r=figma.createFrame();r.resize(595,842),r.x=i,r.y=0,r.fills=[{type:"SOLID",color:a(e.backgroundAndNumber)}];let c=65,d=!1,g=0;for(const e of n){const a=e.match(/^\d+\.\s+/);c=await l(e,c,r,d),(0===t&&1===n.indexOf(e)||t===s.length-1&&0===n.indexOf(e))&&(g=c),d=!!a}0!==t&&t!==s.length-1||o(r,g+45,486,r.height-g-45-88),r.resize(595,Math.max(c+88,842)),i+=645}}(i),figma.notify("Text layers and frames created successfully.")}}})();